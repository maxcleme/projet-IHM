<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Filandar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" href="css/bootstrap.css" media="screen">
    <link rel="stylesheet" href="css/contrainte.css" media="screen">
    <link rel="stylesheet" href="css/toastr.css" media="screen">
	<link rel="stylesheet" href="css/soon.css" media="screen">

     <script src="js/jquery.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/toastr.js"></script>


  </head>
  <body>
    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a href="../" class="navbar-brand">Filandar - <strong>Votre</strong> calendrier</a>
        </div>
      </div>
    </div>


    <div class="container" style="margin-top: 100px;">
   
      <div class="jumbotron form-horizontal"  id="div-ajouter-contrainte">
        
		<center>
		<div class="animated FadeIn" id="timer" data-animated="FadeIn">
                <p id="message">Temps restant pour ajouter vos contraintes</p>
                <div id="days" class="timer_box"><h1>1</h1><p>Days</p></div>
                <div id="hours" class="timer_box"><h1>2</h1><p>Hours</p></div>
                <div id="minutes" class="timer_box"><h1>58</h1><p>Minutes</p></div>
                <div id="seconds" class="timer_box"><h1>27</h1><p>Seconds</p></div>
        </div>
		</center>
		
         
        <h3>Ajouter une contrainte</h3>
        <div class="col-md-4 form-group">
           <input class="form-control col-md-3" name="motif" id="motif" placeholder="Saisir un motif" autocomplete="off"/>
        </div>
        <div class="col-md-4 form-group">
        <select size="1" name="niveau" id="niveau" class="form-control col-md-4" autocomplete="off">
          <option >Saisir un niveau de priorité</option>
          <option>Indispensable</option>
          <option>Préférable</option>
          <option>Souhaité</option>
        </select>
      </div>
      <br>

      <div id="draggable-div" title="Déplacer cette contrainte dans le calendrier">
        <em>A déplacer dans le calendrier</em><br>
         <center><span class="btn btn-info"  id="contrainte-exemple"><span>--</span><em>--</em></span></center>
      </div>
     
      </div>
      <div class="jumbotron">
          <table id="calendar-contraint">
            <tr><th></th><th>Lundi</th><th>Mardi</th><th>Mercredi</th><th>Jeudi</th><th>Vendredi</th><th>Samedi</th></tr>
            <tr><th>8h00</th><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>Perso : Natation</span></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>8h30</th><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>9h00</th><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>9h30</th><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>10h00</th><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>10h30</th><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>11h00</th><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>11h30</th><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>12h00</th><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>12h30</th><td></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>13h00</th><td></td><td></td><td></td><td></td><td></td><td></td></tr>
            <tr><th>13h30</th><td></td><td></td><td></td><td></td><td></td><td></td></tr>
            <tr><th>14h00</th><td></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>14h30</th><td></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>15h00</th><td></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>15h30</th><td></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>16h00</th><td></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>16h30</th><td></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>17h00</th><td></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>17h30</th><td></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>18h00</th><td></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>18h30</th><td></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
            <tr><th>19h00</th><td></td><td></td><td><span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>INRIA</span></td><td></td><td></td><td></td></tr>
          </table>
      </div>
    </div>
    <script type="text/javascript">

      function chrono(time) {
        var d = new Date(time)

        $("#chrono").html( "Il reste " + d.getHours() + "h" + d.getMinutes() + "m" + d.getSeconds() +  "s pour ajouter vos contraintes de temps"  );

        setTimeout('chrono('  +  (time - 1000 ) +')', 1000);
      }
      chrono(670000);

      var niveau  = false;
      var motif   = false;
      var deletable = true;
      $("#draggable-div").tooltip({show: {duration: 400 ,width:300}});
      $("#contrainte-exemple").draggable({revert : true});

      function supprimer(current) {
      if(deletable){
          $(current).remove();
      }
      toastr.success("La contrainte a bien été supprimée");
      }

      function enregistrer() {
      toastr.success("La contrainte a bien été enregistrée");
      }

      $( "#calendar-contraint td" ).droppable({
          drop: function( event, ui ) {
            if(motif && niveau){
      enregistrer();
              $(this).append("<span class='supprimable btn btn-info' title='Supprimer' onClick='supprimer(this);'>" + $(ui.draggable).html() + "</span>");
              $(".btn-info").tooltip();
            }
            else {
              toastr.error("veuillez saisir une motif et une priorité");
            }
          }
      });

      $("td").mouseover(function () {
        $(this).parent().css("color","blue");
        $(this).parent().css("text-decoration","underline");
      });

      $("td").mouseleave(function () {
        $(this).parent().css("color","black");
        $(this).parent().css("text-decoration","none");
      });

      $("#motif").keyup(function(){
        motif = true;
        $("#contrainte-exemple span").html($(this).val());
      });

      $("#niveau").change(function(){
        niveau = true;
        $("#contrainte-exemple em").html($(this).val());
      
      }); 

      $("#niveau").change(function(){
        $("#draggable-div").tooltip( "open" );
      });
	  
	  (function($) {
    "use strict";
    $("a.btn-progress").click(function(){
        $('#bar-container').slideToggle(); 
    });
})(jQuery);
(function($) {
    /**
    * Set your date here  (YEAR, MONTH (0 for January/11 for December), DAY, HOUR, MINUTE, SECOND)
    * according to the GMT+0 Timezone
    **/
    var launch = new Date(2015, 04, 0, 11, 00);
	    /**
    * The script
    **/
    var message = $('#message');
    var days = $('#days');
    var hours = $('#hours');
    var minutes = $('#minutes');
    var seconds = $('#seconds');
    
    setDate();
    function setDate(){
        var now = new Date();
        if( launch < now ){
            days.html('<h1>0</H1><p>Jour</p>');
            hours.html('<h1>0</h1><p>Heure</p>');
            minutes.html('<h1>0</h1><p>Minute</p>');
            seconds.html('<h1>0</h1><p>Seconde</p>');
            message.html('Temps restant pour ajouter vos contraintes');
        }
        else{
            var s = -now.getTimezoneOffset()*60 + (launch.getTime() - now.getTime())/1000;
            var d = Math.floor(s/86400);
            days.html('<h1>'+d+'</h1><p>Jour'+(d>1?'s':''),'</p>');
            s -= d*86400;

            var h = Math.floor(s/3600);
            hours.html('<h1>'+h+'</h1><p>Heure'+(h>1?'s':''),'</p>');
            s -= h*3600;

            var m = Math.floor(s/60);
            minutes.html('<h1>'+m+'</h1><p>Minute'+(m>1?'s':''),'</p>');

            s = Math.floor(s-m*60);
            seconds.html('<h1>'+s+'</h1><p>Seconde'+(s>1?'s':''),'</p>');
            setTimeout(setDate, 1000);

            message.html('Temps restant pour ajouter vos contraintes');
        }
    }
})(jQuery);
    </script>
</body>
</html>
